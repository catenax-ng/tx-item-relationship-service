# Copyright (c) 2021,2022,2023
  #       2022: ZF Friedrichshafen AG
  #       2022: ISTOS GmbH
  #       2022,2023: Bayerische Motoren Werke Aktiengesellschaft (BMW AG)
  #       2022,2023: BOSCH AG
  # Copyright (c) 2021,2022,2023 Contributors to the Eclipse Foundation
  #
  # See the NOTICE file(s) distributed with this work for additional
  # information regarding copyright ownership.
  #
  # This program and the accompanying materials are made available under the
  # terms of the Apache License, Version 2.0 which is available at
  # https://www.apache.org/licenses/LICENSE-2.0. *
  # Unless required by applicable law or agreed to in writing, software
  # distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  # License for the specific language governing permissions and limitations
  # under the License.
  #
  # SPDX-License-Identifier: Apache-2.0
  #
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "irs.fullname" . }}-configmap-logging
  namespace: {{ .Values.namespace }}
data:
  log4j2.properties: |
    status=warn
    name=LoggingConfig
    rootLogger.appenderRef.stdout.ref=consoleLogger

    appender.console.layout.pattern='%style{%d{ISO8601}}{black} %highlight{%-5level}[%style{%t}{bright,blue}] %style{%C{1.}}{bright,yellow}: %encode{%msg}%n%throwable'
    appender.console.layout.type=PatternLayout
    appender.console.name=consoleLogger
    appender.console.target=SYSTEM_OUT
    appender.console.type=Console

    logging.group.apache=org.apache.catalina.startup.DigesterFactory, org.apache.catalina.util.LifecycleBase, org.apache.coyote.http11.Http11NioProtocol, org.apache.sshd.common.util.SecurityUtils, org.apache.tomcat.util.net.NioSelectorPool
    logging.group.springframework=org.springframework.boot.actuate.endpoint.jmx, org.springframework.web, org.springframework.web.client.RestTemplate, org.springframework.security.authentication, org.springframework.security.oauth2
    logging.group.tractusx=org.eclipse.tractusx.irs, org.eclipse.tractusx.edc, org.eclipse.tractusx.ess

    {{- if not .Values.logging.config.override }}
    {{ .Values.logging.levels | nindent 4 }}
    {{- end}}

    {{- if .Values.logging.config.content }}
    {{ .Values.logging.config.content | nindent 4 }}
    {{- end }}
